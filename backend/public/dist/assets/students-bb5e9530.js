import{aj as f,A as j,c as y,aD as S,j as t,aE as g,B as C,T as z,aF as v,ac as A,aG as F,ae as T,aH as D,aI as N,r as c,at as $,au as k,C as E,W as h,n as I,aJ as B}from"./index-15ec7641.js";const H=({page:e=1,pageSize:s=10,search:a=""})=>f({queryKey:["students",{page:e,pageSize:s,search:a}],queryFn:async()=>{const{data:i}=await j.get(`/student/all?page=${e}&pageSize=${s}&search=${a}`);return i},retry:(i,d)=>i<1,staleTime:1/0,refetchOnWindowFocus:!1});function P(){const e=y(),{close:s,isOpen:a,open:i}=S();return t.jsxs(t.Fragment,{children:[t.jsx(g,{onClose:s,open:a,confirmationTitle:"Delete All Students",confirmationDescription:"Are you sure you want to delete all students?"}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1},children:[t.jsx(z,{variant:"h5",component:"h1",children:"Students"}),t.jsx(v,{onColumnFilter:()=>{},onAdd:()=>e.push("/student/create")})]})]})}const l=N(),V=(e,s)=>[{itemText:"View",icon:"eva:eye-outline",onClick:()=>s==null?void 0:s.push(`/student/view/${e==null?void 0:e._id}`)},{itemText:"Edit",icon:"eva:edit-fill",onClick:()=>s==null?void 0:s.push(`/student/edit/${e==null?void 0:e._id}`)},{itemText:"New Followup",icon:"eva:phone-fill",onClick:()=>s==null?void 0:s.push(`/followup/create/students/${e==null?void 0:e._id}`)},{itemText:"New Fee",icon:"eva:credit-card-fill",onClick:()=>s==null?void 0:s.push(`/student-fee/create/${e==null?void 0:e._id}`)},{itemText:"Delete",color:"error.main",icon:"eva:trash-2-outline",onClick:a=>{}}],_=[{accessorKey:"avatar",cell:({getValue:e})=>t.jsx(A,{src:e(),alt:"Avatar"}),size:50},{accessorKey:"ifastId",header:"Student ID",size:150},{header:"Full Name",size:100,cell:({row:e})=>t.jsx(F,{placement:"top",title:`${e.original.firstName} ${e.original.lastName}`,children:t.jsxs("div",{children:[e.original.firstName," ",e.original.lastName]})})},l.accessor("email",{header:"Email",size:120}),l.accessor("phoneNo",{header:"Phone",size:120}),l.accessor(e=>T(e.dob),{header:"DOB",size:90}),{accessorFn:e=>{var s;return(s=e==null?void 0:e.address)==null?void 0:s.streetAddress},header:"Street Address",size:120},l.accessor(e=>{var s;return(s=e==null?void 0:e.address)==null?void 0:s.city},{header:"City",size:120}),{accessorFn:e=>{var s;return(s=e==null?void 0:e.address)==null?void 0:s.state},header:"State",size:100},{accessorFn:e=>{var s;return(s=e==null?void 0:e.enrolledBatch)==null?void 0:s.map(a=>a.name).join(", ")},header:"Batches",size:150},{header:"Action",cell:({row:{original:e}})=>t.jsx(D,{menus:V,row:e}),size:50}];function b(){var u;const[e,s]=c.useState(1),[a,i]=c.useState(5),[d,r]=c.useState([]),{searchValue:p}=$(),m=k(),{data:n,isLoading:x,isSuccess:o}=H({page:e,pageSize:a,search:p[m]||""});return c.useEffect(()=>{o&&r((n==null?void 0:n.data)||[])},[n,o]),t.jsxs(E,{children:[t.jsx(h,{children:t.jsxs("title",{children:["Student View | ",(u=I)==null?void 0:u.appName]})}),t.jsx(B,{columnDef:_,rows:d,page:e,setPage:s,pageSize:a,setPageSize:i,total:n==null?void 0:n.count,topContent:t.jsx(P,{}),loading:x,stickyHeader:!0,height:"65vh"})]})}function M(){return t.jsxs(t.Fragment,{children:[t.jsx(h,{children:t.jsx("title",{children:" Students | IfastAcademy "})}),t.jsx(b,{})]})}export{M as default};
